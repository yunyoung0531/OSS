# OSS
오픈소스SW개론 첫번째 과제 조선대학교 컴퓨터공학과 20203215 최윤영

**********************************

## getopts
1) 사용자 명령어로써의 getopts 
getopts 유틸리티는 파라메터들의 리스트에서 옵션(options)과 옵션-파라메터(option-parameter)를 추출하는데 사용한다.

1.1) 사용법

getopts의 사용 방법은 다음과 같다.

/usr/bin/getopts optstring name  [ arg ...  ]


    optstring : 옵션으로 사용될 문자들로 구성된 문자열

    name : getopt가 옵션 분석과정에서 분석된 옵션 문자열을 저자하는 쉘 변수

    arg  : 쉘 스크립트에 전달되는 positional parameter대신 분석하고자 하는 문자열


1.2) getopts의 동작 과정

getopts가 호출될 때마다, getopts는 쉘 변수 $name에 다음 옵션 문자를 저장하고, 쉘 변수 $OPTIND에 처리하여야 할 다음 아규먼트에 대한 인덱스를 저장한다. 쉘이 호출 될 때 마다, $OPTIND는 1로 초기화된다.

옵션에서 옵션-아규먼트(option-argument)가 필요한 경우, getopts는 옵션-아규먼트를 쉘 변수 $OPTARG에 저장한다. 분석과정 중에 옵션 아규먼트를 필요로 하는 옵션문자가 없거나, 옵션-아규먼트를 필요로 하는 옵션문자가 있지만 이에 대한 에옵션 아규먼트가 없는 경우에 $OPTARG는 unset된다.

optionstring 오퍼랜드에 포함되지 있지 않은 옵션 문자가 옵션 문자 위치에 있는 경우 name으로 지정된 쉘 변수는 물음표 '?'로 설정된다. 이 경우, optstring의 첫 문자가 콜론 ':'이라면, 쉘 변수 $OPTARG는 발견된 옵션 문자로 설정되며, 표준 에러 출력(stderr)에는 아무 것도 출력되지 않는다. 그 이외의 경우에 쉘 변수 $OPTARG는 unset되고 표준 에러 출력으로 diagonostic message가 출력된다. 이러한 상황은 호출하는 애플리케이션에 아규먼트가 주어지는진 과정에서 탐지된 에러로 볼 수는 있지만, getopts 처리과정에서의 에러는 아니다.

옵션 아규먼트가 없는 경우
l       optstring의 첫번째 문자가 콜론 ':'인 경우, name으로 지정된 쉘 변수는 콜론 ':'문자    로 설정되고, 쉘 변수 OPTARG는 발견된 옵션 문자로 설정된다.

l       optstring의 첫번째 문자가 콜론 ':'이 아닌 경우에는 name으로 지정된 쉘 변수는 물음표 ?'로 설정되고, 쉘 변수 OPTARG는 unset되면서 표준 에러 출력으로 diagonostic message가 출력된다. 이러한 상황은 호출하는 애플려케이션에 아규먼트가 주어지는 과정에서 탐지되는 에러로 볼 수는 있지만, getopts 처리과정에서의 에러는 아니다. diagonostic messge가 위에서 기술한 것처럼 출력되기는 하지만 exit status는 0으로 설정된다.

옵션의 마지막에 도달한 경우, getopts는 1이상의 리턴값을 가지고 exit한다. 쉘 변수 OPTIND 값은 옵션-아규먼트가 아닌 첫번째 옵션에 대한 인덱스로 설정된다. 최초의 -- 아규먼트 이전에 다른 non-option-argument가 없는 경우에 -- 아규먼트는 옵션-아규먼트로 간주된다. 최초의 --아규먼트 이전에 다른 non-option-argument가 있고 다른 non-option-argument가 없는 경우에는 최초의 -- 아규먼트는 $#+1의 값을 가지는 아규먼트로 간주되며 name변수의 값은 물음표 '?'로 설정된다.  다음의 조건중 하나를 만족하는 경우 옵션의 끝이 된다.

         . 스페셜 옵션 --

         . -로 시작하지 안는 아규먼트를 발경한 경우

         . 에러가 발생한 경우
